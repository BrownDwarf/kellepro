FUNCTION mag2fluxjy, mag,band

;band 1 =J
;band2 = H
;band3 = K_S

;RETURNS FLUX IN mJy
; All based on Appendix of Spitzer Observer's Manual
; Checked with online calculator:
; http://ssc.spitzer.caltech.edu/tools/magtojy/

;written April, 2007

IF N_params() lt 1 then begin
    print,'Syntax -  MAG2FLUXJY, magnitude, band'
    print, 'Returns flux in mJy'
     print,'bands:'
     print,'J=1'
     print,'H=2'
     print,'K_S=3'
     return,0
ENDIF

CASE band OF
    1: zpt_jy=1594
    2: zpt_jy=1024
    3: zpt_jy=666.7
ENDCASE


flux=zpt_jy * 10^(-mag/2.5) ; in Jy
;see Appendix of Spitzer Observer's Manual

return,flux*1e3 ; return flux in mJy

END
